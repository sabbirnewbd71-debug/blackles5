<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Admin Panel</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
body{background:#0f172a;color:#e5e7eb}
.card{background:#020617;border-radius:16px}
.hidden{display:none}
</style>
</head>
<body class="container py-4">

<h3>ðŸ”¥ Admin Panel</h3>

<div id="login" class="card p-3">
  <input id="aid" class="form-control mb-2" placeholder="Admin ID">
  <input id="otp" class="form-control mb-2" placeholder="OTP">
  <button class="btn btn-success w-100" onclick="login()">Login</button>
</div>

<div id="panel" class="hidden">
  <div class="card p-3 mb-3">
    <b id="aname"></b><br>
    Live Login: <span id="live">0</span>
  </div>

  <div class="card p-3 mb-3">
    <h6>Create User</h6>
    <input id="u" class="form-control mb-1" placeholder="Username">
    <input id="p" class="form-control mb-1" placeholder="Password">
    <input id="d" class="form-control mb-1" placeholder="Days">
    <button class="btn btn-primary w-100" onclick="createUser()">Create</button>
  </div>

  <div class="card p-3">
    <h6>Reset HWID</h6>
    <input id="ru" class="form-control mb-1" placeholder="Username">
    <button class="btn btn-warning w-100" onclick="resetHWID()">Reset</button>
  </div>
</div>

<script type="module">
import {initializeApp} from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import {getDatabase,ref,get,set,update,onValue} from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

const firebaseConfig={
 apiKey:"API_KEY",
 databaseURL:"https://PROJECT.firebaseio.com",
 projectId:"PROJECT"
};

const WEBHOOK="DISCORD_WEBHOOK_URL";

const app=initializeApp(firebaseConfig);
const db=getDatabase(app);

function discord(t,m,c=0x5865F2){
 fetch(WEBHOOK,{method:"POST",headers:{'Content-Type':'application/json'},
 body:JSON.stringify({embeds:[{title:t,description:m,color:c,timestamp:new Date()}]})});
}

window.login=async()=>{
 const s=await get(ref(db,"admins/"+aid.value));
 if(!s.exists()||s.val().otp!==otp.value||s.val().used) return alert("Invalid");
 update(ref(db,"admins/"+aid.value),{used:true});
 aname.innerText="Admin: "+s.val().name;
 login.classList.add("hidden"); panel.classList.remove("hidden");
 discord("ðŸ” Admin Login",s.val().name,0x57F287);
};

window.createUser=()=>{
 const exp=Math.floor(Date.now()/1000)+(d.value*86400);
 set(ref(db,"users/"+u.value),{
  password:p.value,expire:exp,hwid:"",admin:aname.innerText
 });
 discord("ðŸ‘¤ User Created",u.value,0x3498DB);
};

window.resetHWID=()=>{
 update(ref(db,"users/"+ru.value),{hwid:""});
 discord("ðŸ”„ HWID Reset",ru.value,0xFAA61A);
};

onValue(ref(db,"live_login/count"),s=>live.innerText=s.val()||0);
</script>
</body>
</html>
